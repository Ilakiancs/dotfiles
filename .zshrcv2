# ===== Amazon Q pre =====
[[ -f "${HOME}/Library/Application Support/amazon-q/shell/zshrc.pre.zsh" ]] && builtin source "${HOME}/Library/Application Support/amazon-q/shell/zshrc.pre.zsh"

# ===== Oh My Zsh base =====
export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="spaceship"
plugins=(git)

# ===== Spaceship settings (must be before oh-my-zsh) =====
unset SPACESHIP_KUBECONTEXT_SHOW
export SPACESHIP_AWS_SHOW=false
export SPACESHIP_GCLOUD_SHOW=false
export SPACESHIP_KUBECTL_SHOW=false
export SPACESHIP_KUBECTL_CONTEXT_SHOW=false
export SPACESHIP_DOCKER_SHOW=false
export SPACESHIP_TERRAFORM_SHOW=false

# Classic look: user@host dir git ➜
export SPACESHIP_PROMPT_ADD_NEWLINE=true
export SPACESHIP_CHAR_SYMBOL="➜ "
export SPACESHIP_CHAR_SUFFIX=" "
export SPACESHIP_USER_SHOW=always
export SPACESHIP_HOST_SHOW=always
export SPACESHIP_DIR_TRUNC=3
export SPACESHIP_PROMPT_ORDER=(user host dir git node python time char)
# If you want it cleaner:
# export SPACESHIP_NODE_SHOW=false
# export SPACESHIP_PYTHON_SHOW=false
# export SPACESHIP_TIME_SHOW=false

# Load Oh My Zsh (after spaceship vars)
source "$ZSH/oh-my-zsh.sh"

# ===== Paths =====
export HOMEBREW_PREFIX="/opt/homebrew"
export HOMEBREW_CELLAR="/opt/homebrew/Cellar"
export HOMEBREW_REPOSITORY="/opt/homebrew"
fpath+=/opt/homebrew/share/zsh/site-functions

# Base PATH like before
export PATH="/opt/homebrew/bin:/opt/homebrew/sbin:$PATH"
export PATH="$HOME/.composer/vendor/bin:$HOME/go/bin:$PATH"
export MANPATH=":${MANPATH#:}"
export INFOPATH="/opt/homebrew/share/info:${INFOPATH:-}"

# MySQL path (keep early so mysql is found)
export PATH="/opt/homebrew/opt/mysql@8.4/bin:$PATH"

# Windsurf
export PATH="$HOME/.codeium/windsurf/bin:$PATH"

# JetBrains Toolbox scripts
export PATH="$HOME/Library/Application Support/JetBrains/Toolbox/scripts:$PATH"

# Lando (if installed)
export PATH="$HOME/.lando/bin:$PATH"

# ===== Aliases =====
alias vim="nvim"
alias ls="ls -lah"
alias v="nvim || code ."
alias gs="git status"
alias gc="git commit"
alias gp="git push"

# ===== FZF =====
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# ===== Ripgrep =====
export RIPGREP_CONFIG_PATH="$HOME/.ripgreprc"

# ===== autojump =====
[ -f /opt/homebrew/etc/profile.d/autojump.sh ] && . /opt/homebrew/etc/profile.d/autojump.sh

# ===== JavaFX =====
export PATH_TO_FX="$HOME/javafx-sdk-23.0.1/lib"

# ===== Angular CLI completion =====
if command -v ng >/dev/null 2>&1; then
  source <(ng completion script)
fi

# ===== NVM =====
export NVM_DIR="$HOME/.nvm"
if [ -s "/opt/homebrew/opt/nvm/nvm.sh" ]; then
  . "/opt/homebrew/opt/nvm/nvm.sh"
else
  [ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"
fi
[ -s "$NVM_DIR/bash_completion" ] && . "$NVM_DIR/bash_completion"

# ===== GPG TTY =====
export GPG_TTY="$(tty)"

# ===== Amazon Q post =====
[[ -f "${HOME}/Library/Application Support/amazon-q/shell/zshrc.post.zsh" ]] && builtin source "${HOME}/Library/Application Support/amazon-q/shell/zshrc.post.zsh"

# ===== Kiro (optional) =====
[[ "$TERM_PROGRAM" == "kiro" ]] && . "$(kiro --locate-shell-integration-path zsh 2>/dev/null)" 2>/dev/null || true

alias ls='ls -G'
alias ll='ls -lhG'
alias la='ls -lahG'

